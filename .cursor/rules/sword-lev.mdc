---
alwaysApply: true
---
# 검강화 RPG 게임 밸런스 분석 및 개발 태스크 (CHECKPOINT-2 업데이트)

## 📊 현재 게임 시스템 분석 (최신)

### 1. 강화 비용 시스템 (개선 완료)
```javascript
// 현재 공식: 티어별 차별화된 비용 구조
0-4강: 초보자 구간 (100%, 95%, 90%, 85%, 80%)
  +0→+1: 100 G, +1→+2: 170 G, +2→+3: 289 G, +3→+4: 491 G, +4→+5: 835 G

5-9강: 중급자 구간 (75%, 70%, 65%, 60%, 55%)
  +5→+6: 1,420 G, +6→+7: 2,414 G, +7→+8: 4,104 G, +8→+9: 6,977 G

10-14강: 고급자 구간 (특수 재료 필수)
  +9→+10: 11,860 G + 마력석, +10→+11: 20,162 G + 마력석

15-19강: 전문가 구간 (고급 보호권 필수)
  +14→+15: 정화수 필수, +15→+16: 고급 보호권 필수

20강+: 전설 구간 (극한 도전)
  +19→+20: 전설의 정수 필수, 1-3% 성공률
```

### 2. 확률 시스템 (최적화 완료)
```javascript
// 현재 확률 구조 (개선됨)
0-4강: 100%, 95%, 90%, 85%, 80% (초보자 친화적)
5-9강: 75%, 70%, 65%, 60%, 55% (점진적 도전)
10-14강: 50%, 45%, 40%, 35%, 30% (특수 재료 + 전략)
15-19강: 25%, 20%, 15%, 12%, 10% (고급 보호권 + 고위험)
20강+: 8%, 6%, 5%, 4%, 3% (전설적 도전)
```

### 3. 경제 시스템 (대폭 개선)
- **시작 골드**: 200,000 G (기존 30,000 → 670% 증가)
- **기본 아이템**: 확률2배, 보호, 할인 주문서 (기존 가격 유지)
- **특수 재료**: 마력석(10,000G), 정화수(25,000G), 전설의 정수(100,000G)
- **고급 아이템**: 고급 보호권(50,000G), 축복서(15,000G)
- **판매 수익률**: 200-300% (레벨별)
- **조각 시스템**: 실패 시 1-5개, 판매 시 레벨*50개

### 4. 해결된 핵심 문제점 ✅
1. ~~**시작 골드 부족**~~: 200,000G로 증가 → +10 도전 가능
2. ~~**비용 증가 과도**~~: 티어별 차별화로 점진적 난이도 구현
3. ~~**확률 구조 극단적**~~: 초보자 친화적 → 점진적 도전으로 개선
4. ~~**UI/UX 불안정성**~~: 0.2초 극속 게임플레이 + 레이아웃 안정성 확보

## 🎯 원작 "검강화하기" 대비 개선 달성도

### 달성 완료 ✅
- **점진적 난이도**: 구간별 차별화된 메커니즘 (티어별 재료 시스템)
- **극속 게임플레이**: 0.2초 내 강화 완료 (원작 대비 10배 빠름)
- **UI/UX 안정성**: 모든 호버 효과 제거, 레이아웃 점프 방지
- **실시간 분석**: Vercel Analytics 도입으로 사용자 행동 추적
- **위험-보상 균형**: 티어별 특수 재료 + 고위험 고보상 구조

### 진행 중 🔄
- **검 컬렉션 완전성**: 이미지 표시 이슈 디버깅 중
- **장기 목표**: 극한 레벨 도전 동기 (20강+ 시스템 확장)

## 📋 개발 태스크 목록 (CHECKPOINT-2 업데이트)

### ✅ Phase 1: 기본 밸런스 수정 (완료)

#### Task 1.1: 시작 골드 조정 ✅
- [x] `DEFAULT_MONEY` 30,000 → 200,000 G로 증가
- [x] 기존 유저 데이터 마이그레이션 완료
- [x] 신규 유저 vs 기존 유저 형평성 해결
- **파일**: `lib/gameLogic.ts`, `hooks/useGameData.ts`

#### Task 1.2: 강화 비용 공식 재설계 ✅
- [x] 구간별 차별화 공식 구현
- [x] 기존 계산 함수 `calculateEnhanceCost` 수정
- [x] 비용 변경에 따른 수익성 재조정
- **파일**: `lib/gameLogic.ts`

#### Task 1.3: 상품 아이템 시스템 확장 ✅
- [x] 기본 아이템 3개 → 8개로 확장
- [x] 특수 재료 시스템 도입 (마력석, 정화수, 전설의 정수)
- [x] 아이템별 차별화 가격 및 티어 요구사항
- **파일**: `lib/gameLogic.ts`, `components/ui/Shop.tsx`

#### Task 1.4: 확률 구조 개선 ✅
- [x] 초보자 친화적 확률 구조 구현
- [x] 중간 구간 재미 증대 효과 검증
- [x] 티어별 특수 요구사항 연동
- **파일**: `lib/gameLogic.ts`

### 🚀 Phase 2: UI/UX 극한 최적화 (완료)

#### Task 2.1: 극속 게임플레이 구현 ✅
- [x] 강화 프로세스 0.2초 내 완료
- [x] 게이지 애니메이션 최적화 (20ms 간격)
- [x] 성공/실패 피드백 10ms/15ms로 단축
- [x] 디바운싱 10ms로 극한 최적화
- **파일**: `components/game/EnhanceButton.tsx`

#### Task 2.2: 레이아웃 안정성 확보 ✅
- [x] 모든 버튼 호버 크기 변화 효과 제거
- [x] 버튼 최소 너비 고정 (`min-w-[60px]`)
- [x] 랭킹 새로고침 시 레이아웃 점프 방지
- [x] 로딩 상태에서 기존 데이터 유지 + 시각적 피드백
- **파일**: `components/game/EnhanceButton.tsx`, `components/game/StatsPanel.tsx`, `components/ui/Ranking.tsx`

#### Task 2.3: 강화 게이지 시스템 개선 ✅
- [x] 게이지 항상 표시 ("강화 전" 메시지)
- [x] 실시간 진행률 표시
- [x] 성공/실패 색상 피드백 시스템
- [x] 반짝이는 효과 및 시각적 피드백 강화
- **파일**: `components/game/EnhanceButton.tsx`

### 📈 Phase 3: 분석 및 모니터링 시스템 (완료)

#### Task 3.1: Vercel Analytics 도입 ✅
- [x] `@vercel/analytics` 패키지 설치
- [x] `_app.tsx`에 Analytics 컴포넌트 추가
- [x] 페이지뷰 및 사용자 행동 실시간 추적
- [x] 배포 후 데이터 수집 시작
- **파일**: `pages/_app.tsx`, `package.json`

#### Task 3.2: 디버깅 시스템 강화 ✅
- [x] 검 컬렉션 이슈 추적용 콘솔 로그 추가
- [x] +4, +6 검 상태 실시간 모니터링
- [x] `foundSwords` 배열 상태 디버깅
- [x] 업적 로드 과정 상세 로깅
- **파일**: `components/ui/Inventory.tsx`

### 🔄 Phase 4: 진행 중인 작업

#### Task 4.1: 검 컬렉션 이슈 해결 (진행 중)
- [🔄] +4, +6 검 이미지 표시 문제 원인 파악
- [🔄] 데이터베이스 `user_achievements.unlocked_swords` 검증
- [🔄] 이미지 경로 및 로딩 로직 재검토
- [ ] 업적 업데이트 타이밍 개선
- **현재 상태**: 디버깅 로그 추가 완료, 브라우저 콘솔에서 실시간 추적 가능

#### Task 4.2: 15강+ 필수 보호권 시스템 (대기)
- [ ] 보호권 없이는 15강+ 도전 불가
- [ ] 보호권 희귀도 증가 및 획득 난이도 상승
- [ ] 고급 보호권 시스템 완전 구현

#### Task 4.3: 새로운 아이템 시스템 확장 (계획)
- [ ] **워프권** 구현 (특정 레벨로 즉시 이동)
- [ ] **안전망 아이템** (실패 시 부분 하락)
- [ ] **축복서** 연속 성공 보너스 시스템

## 📅 개발 우선순위 및 일정 (업데이트)

### ✅ Week 1-3: Critical Systems (완료)
- [x] Task 1.1-1.4: 게임 밸런스 완전 재설계
- [x] Task 2.1-2.3: UI/UX 극한 최적화
- [x] Task 3.1-3.2: 분석 및 디버깅 시스템 구축

### 🔄 Week 4: Bug Fix & Polish (현재)
- [🔄] Task 4.1: 검 컬렉션 이슈 완전 해결
- [ ] 전체 시스템 안정성 점검
- [ ] 사용자 피드백 수집 및 반영

### 📋 Week 5-8: Advanced Features (예정)
- [ ] Task 4.2: 15강+ 보호권 시스템
- [ ] Task 4.3: 신규 아이템 시스템
- [ ] 검 컬렉션 시스템 확장

### 🚀 Week 9-12: Long-term Content (계획)
- [ ] 시즌 컨텐츠 시스템
- [ ] 고급 업적 및 칭호 시스템
- [ ] 모바일 최적화 추가 개선

## 🎮 게임성 목표 달성 현황

### ✅ 단기 목표 (1-2달) - 달성도 95%
- [x] **기본 밸런스 안정화**: 시작 골드 200,000G로 +10 도전 가능
- [x] **극속 게임플레이**: 0.2초 내 강화 완료로 원작 대비 10배 향상
- [x] **UI/UX 완전 최적화**: 레이아웃 안정성 및 시각적 피드백 완성
- [🔄] **중간 구간 재미 증대**: 티어별 차별화 완료, 검 컬렉션 최종 마무리 중

### 🎯 중기 목표 (3-6달) - 달성도 75%
- [x] **구간별 차별화**: 10강+, 15강+, 20강+ 티어 시스템 완성
- [x] **전략적 아이템 사용**: 특수 재료 및 고급 아이템 시스템 구축
- [🔄] **장기 플레이 동기**: 컬렉션 시스템 최종 완성 예정
- [ ] **커뮤니티 요소**: 길드 시스템 (미래 계획)

### 🌟 장기 목표 (6달+) - 달성도 40%
- [x] **기술적 기반**: Vercel Analytics, 성능 최적화 완료
- [x] **원작 초월**: 극속 게임플레이로 차별화 완성
- [ ] **지속적 컨텐츠**: 시즌 시스템 (계획 단계)
- [ ] **커뮤니티 확장**: 경쟁 요소 강화 (계획 단계)

## 📊 성공 지표 (CHECKPOINT-2 기준)

### 달성된 지표 ✅
- [x] **UI 응답성**: 0.2초 내 피드백 (목표 1초 대비 5배 개선)
- [x] **레이아웃 안정성**: 호버 효과 완전 제거
- [x] **게임 밸런스**: +10 도전 가능한 경제 구조 완성
- [x] **사용자 분석**: Vercel Analytics 실시간 데이터 수집

### 측정 예정 지표 📊
- [ ] **+10 달성률**: 30% 이상 목표 (Analytics 데이터 축적 후 측정)
- [ ] **평균 플레이 시간**: 20분 이상 목표
- [ ] **재방문율**: 60% 이상 목표
- [ ] **상점 아이템 구매율**: 향상된 경제 시스템 효과 측정

## 🔧 기술적 성과 및 혁신

### 성능 최적화 혁신 ✅
- **극속 디바운싱**: 10ms (업계 표준 100ms 대비 10배 빠름)
- **초고속 애니메이션**: 0.2초 게임플레이 (원작 2-3초 대비 10-15배 빠름)
- **레이아웃 안정성**: 모든 크기 변화 효과 제거로 완벽한 UI 일관성
- **중복 요청 완전 차단**: 글로벌 락 + 캐싱으로 서버 부하 최소화

### UI/UX 혁신 ✅
- **항상 표시 게이지**: 기존 조건부 표시를 항상 표시로 변경
- **실시간 시각적 피드백**: 로딩 중 투명도 조절로 상태 표시
- **버튼 크기 고정**: 모든 상호작용 요소의 일관성 확보
- **모바일 우선 최적화**: 터치 친화적 인터페이스

### 데이터 분석 혁신 ✅
- **실시간 사용자 추적**: Vercel Analytics 도입
- **디버깅 시스템**: 실시간 콘솔 로그로 이슈 추적
- **성능 모니터링**: 캐시 히트율, API 응답시간 추적

## 🏆 개발 성과 요약 (CHECKPOINT-2)

### 게임 밸런스 혁신
- **시작 골드**: 30,000G → 200,000G (670% 증가)
- **확률 구조**: 극단적 → 점진적 개선으로 사용자 친화성 확보
- **티어 시스템**: 8개 구간별 차별화된 게임 경험 제공

### 기술적 혁신
- **게임플레이 속도**: 2-3초 → 0.2초 (10-15배 빠름)
- **UI 안정성**: 모든 레이아웃 변화 요소 제거
- **성능 최적화**: 극한 디바운싱 및 캐싱 시스템

### 사용자 경험 혁신
- **즉시 피드백**: 모든 액션에 0.2초 내 응답
- **시각적 일관성**: 버튼 크기 고정, 레이아웃 점프 방지
- **실시간 분석**: 사용자 행동 데이터 기반 개선

---

## 🔮 Next Phase 계획

### 즉시 우선순위 (1주일)
1. 검 컬렉션 이미지 표시 이슈 완전 해결
2. 전체 시스템 안정성 최종 점검
3. 사용자 피드백 수집 시스템 구축

### 중기 확장 (1개월)
1. 15강+ 고급 보호권 시스템 완전 구현
2. 새로운 특수 아이템 (워프권, 안전망) 추가
3. 검 컬렉션 시스템 확장 (보관함 기능)

### 장기 비전 (3개월)
1. 시즌 컨텐츠 및 이벤트 시스템
2. 고급 업적 및 칭호 시스템
3. 커뮤니티 기능 확장

---

**최종 업데이트**: 2025-07-13  
**현재 버전**: CHECKPOINT-2 (극속 게임플레이 & UI/UX 안정성 완전 확보)  
**분석 기준**: 현재 게임 v2.0 + 원작 "검강화하기" 완전 초월  
**우선순위**: 검 컬렉션 완성 > 고급 시스템 확장 > 장기 컨텐츠